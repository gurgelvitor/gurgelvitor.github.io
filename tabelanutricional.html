<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progresso - Painel de Bem-Estar</title>
    <link rel="stylesheet" href="assets/dashboard.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta name="description" content="Tabela de alimentos ricos em proteínas e carboidratos, além de uma calculadora de macros.">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6H0W5V50NE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6H0W5V50NE');
</script>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <div class="header-start">
                <a href="index.html" class="back-button">
                    <i class="material-icons">arrow_back</i>
                    <span>Voltar</span>
                </a>
                <h1>Progresso</h1>
            </div>
            <div class="header-end">
                <button id="theme-toggle" class="theme-switcher" aria-label="Alternar tema">
                    <i class="material-icons">dark_mode</i>
                </button>
                <div class="theme-color-dropdown" id="theme-color-dropdown">
                    <button class="theme-color-main-btn" id="theme-color-main-btn" aria-label="Escolher cor do tema">
                        <i class="material-icons">palette</i>
                    </button>
                    <div class="theme-color-picker" id="theme-color-picker" style="display: none;">
                        <button class="theme-color-btn" data-color="default" aria-label="Cor padrão"></button>
                        <button class="theme-color-btn" data-color="green" aria-label="Verde"></button>
                        <button class="theme-color-btn" data-color="gray" aria-label="Cinza"></button>
                        <button class="theme-color-btn" data-color="yellow" aria-label="Amarelo"></button>
                        <button class="theme-color-btn" data-color="orange" aria-label="Laranja"></button>
                        <button class="theme-color-btn" data-color="pink" aria-label="Rosa"></button>
                    </div>
                </div>
            </div>
        </header>

        <main class="dashboard-main">
            <section class="card page-title-card">
                <div class="title-container">
                    <div class="title-icon-wrapper">
                        <i class="material-icons title-icon">trending_up</i>
                    </div>
                    <div class="title-text">
                        <h1>Progresso</h1>
                        <p class="title-subtitle">Veja e anote cada progresso de seus treinos</p>
                    </div>
                </div>
            </section>
                       <section class="card content-card calculator-card" id="calculadora">
                <h2>Calculadora de Calorias</h2>
                <form onsubmit="event.preventDefault(); calcular();">
                    <div class="form-group">
                        <label for="peso">Peso atual (kg):</label>
                        <input type="number" id="peso" placeholder="Ex: 70" />
                    </div>
                    <div class="form-group">
                        <label for="altura">Altura (cm):</label>
                        <input type="number" id="altura" placeholder="Ex: 175" />
                    </div>
                    <div class="form-group">
                        <label for="idade">Idade:</label>
                        <input type="number" id="idade" placeholder="Ex: 25" />
                    </div>
                    <div class="form-group">
                        <label for="sexo">Sexo:</label>
                        <select id="sexo">
                            <option value="masculino">Masculino</option>
                            <option value="feminino">Feminino</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="atividade">Nível de Atividade:</label>
                        <select id="atividade">
                            <option value="1.2">Nenhum exercício</option>
                            <option value="1.375">Pouco exercício (1-2x por semana)</option>
                            <option value="1.55">Exercício moderado (3-4x por semana)</option>
                            <option value="1.725">Muito exercício (5-6x por semana)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="objetivo">Objetivo:</label>
                        <select id="objetivo">
                            <option value="manter">Manter peso</option>
                            <option value="ganhar">Ganhar peso</option>
                            <option value="perder">Perder peso</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="pesoMeta">Peso que deseja atingir (kg):</label>
                        <input type="number" id="pesoMeta" placeholder="Ex: 70" />
                    </div>
                    <div class="form-group">
                        <label for="metaSemana">Quantos kg por semana quer ganhar/perder?</label>
                        <select id="metaSemana">
                            <option value="0">0 kg por semana (manter peso)</option>
                            <option value="0.25">250g por semana</option>
                            <option value="0.5">500g por semana (recomendado)</option>
                            <option value="0.75">750g por semana</option>
                            <option value="1">1kg por semana</option>
                        </select>
                    </div>
                    <button type="submit" class="cta-button" style="margin-top:15px; padding-left: 10px;">Calcular</button>
                </form>
                <div id="resultado" style="margin-top:20px; padding:10px; border-radius:5px;"></div>
            </section>
            <section class="card content-card" id="progress">
                <h2>Progresso de Exercícios</h2>
                <div class="progress-container">
                    <form id="progress-form" class="progress-form">
                        <div class="form-group">
                            <label for="exercise">Exercício:</label>
                            <input type="text" id="exercise" placeholder="Ex: Supino reto" required>
                        </div>
                        <div class="form-group">
                            <label for="weight">Peso (kg):</label>
                            <input type="number" id="weight" step="0.1" min="0" required>
                        </div>
                        <button type="submit" class="cta-button" style="padding-left: 10px;">Registrar Progresso</button>
                    </form>
                    <div class="progress-history">
                        <h3>Histórico de Progresso</h3>
                        <ul id="progress-list"></ul>
                    </div>
                </div>
            </section>
            <section class="card content-card" id="physical-progress">
                <h2>Progresso Físico</h2>
                <div class="physical-progress-container">
                    <div class="progress-type-selector">
                        <button class="progress-type-btn active" data-type="peso">Peso</button>
                        <button class="progress-type-btn" data-type="medidas">Medidas</button>
                    </div>

                    <div class="progress-content">
                        <!-- Seção de Peso -->
                        <div class="progress-section active" data-section="peso">
                            <form id="weight-form" class="progress-form">
                                <div class="form-group">
                                    <label for="current-weight">Peso atual (kg):</label>
                                    <input type="number" id="current-weight" step="0.1" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="weight-date">Data:</label>
                                    <input type="date" id="weight-date" required>
                                </div>
                                <div class="form-buttons">
                                    <button type="submit" class="cta-button" style="padding-left: 10px;">Registrar Peso</button>
                                    <button type="button" class="cta-button graph-btn" onclick="showWeightGraph()">Gráfico</button>
                                </div>
                            </form>
                            <div class="progress-history" id="weight-history"></div>
                        </div>

                        <!-- Seção de Medidas -->
                        <div class="progress-section" data-section="medidas">
                            <form id="measure-form" class="progress-form">
                                <div class="form-group">
                                    <label for="measure-type">Parte do corpo:</label>
                                    <select id="measure-type" required onchange="updateMeasureHistory()">
                                        <option value="">Selecione uma parte</option>
                                        <option value="peito">Peito</option>
                                        <option value="braco">Braço</option>
                                        <option value="cintura">Cintura</option>
                                        <option value="quadril">Quadril</option>
                                        <option value="coxa">Coxa</option>
                                    </select>
                                    <p>Esta area deve ser marcada para aparecer o gráfico</p>
                                </div>
                                <div class="form-group">
                                    <label for="measure-value">Medida (cm):</label>
                                    <input type="number" id="measure-value" step="0.1" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="measure-date">Data:</label>
                                    <input type="date" id="measure-date" required>
                                </div>
                                <div class="form-buttons">
                                    <button type="submit" class="cta-button">Registrar Medida</button>
                                    <button type="button" class="cta-button graph-btn" onclick="showMeasureGraph()">Gráfico</button>
                                </div>
                            </form>
                            <div class="progress-history" id="measure-history"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="dashboard-footer">
            <div class="footer-content">
                <p>Site criado e idealizado por Vitor Gurgel</p>
                <div class="social-links">
                    <a href="https://www.instagram.com/gurgel_vitor._/" class="social-link" aria-label="Instagram" target="_blank">
                        <i class="material-icons">photo_camera</i>
                    </a>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav" role="navigation" aria-label="Navegação principal">
        <button class="nav-item" data-page="home" aria-label="Início">
            <i class="material-icons">home</i>
            <span class="nav-label">Início</span>
        </button>
        <button class="nav-item" data-page="workout" aria-label="Treinos">
            <i class="material-icons">fitness_center</i>
            <span class="nav-label">Treinos</span>
        </button>
        <button class="nav-item" data-page="progress" aria-label="Progresso">
            <i class="material-icons">trending_up</i>
            <span class="nav-label">Progresso</span>
        </button>
        <button class="nav-item" data-page="progress" aria-label="Progresso">
            <i class="material-icons">sports_gymnastics</i>
            <span class="nav-label">Mapa do corpo</span>
        </button>
        <button class="nav-item" data-page="profile" aria-label="Perfil">
            <i class="material-icons">person</i>
            <span class="nav-label">Perfil</span>
        </button>
    </nav>
    
    <script src="assets/dashboard.js"></script>
    <script src="assets/js/progress.js"></script>
    <script src="assets/js/physical-progress.js"></script>
    <script>
  function calcular() {
    const pesoAtual = parseFloat(document.getElementById("peso").value);
    const altura = parseFloat(document.getElementById("altura").value);
    const idade = parseInt(document.getElementById("idade").value);
    const sexo = document.getElementById("sexo").value;
    const atividade = parseFloat(document.getElementById("atividade").value);
    const objetivo = document.getElementById("objetivo").value;
    const pesoMeta = parseFloat(document.getElementById("pesoMeta").value);
    const metaSemana = parseFloat(document.getElementById("metaSemana").value);
    const resultadoDiv = document.getElementById("resultado");

    // Resetar resultados anteriores
    resultadoDiv.innerHTML = '';
    resultadoDiv.classList.remove('error');

    // Validação básica dos campos
    if (
        isNaN(pesoAtual) ||
        isNaN(altura) ||
        isNaN(idade) ||
        isNaN(pesoMeta) ||
        isNaN(metaSemana)
    ) {
        resultadoDiv.innerHTML = "<strong>Erro:</strong> Preencha todos os campos corretamente.";
        resultadoDiv.classList.add('error');
        return;
    }

    // Validações específicas por objetivo
    if (objetivo === "manter" && metaSemana !== 0) {
        resultadoDiv.innerHTML = `<strong>Aviso:</strong> Você escolheu "Manter peso", mas a meta semanal é diferente de 0. Para manter o peso, a meta semanal deve ser zero.`;
        resultadoDiv.classList.add('error');
        return;
    }

    if (objetivo === "manter" && pesoMeta !== pesoAtual) {
        resultadoDiv.innerHTML = `<strong>Aviso:</strong> Você escolheu "Manter peso", mas o peso desejado (${pesoMeta}kg) é diferente do peso atual (${pesoAtual}kg). Para manter o peso, os dois devem ser iguais.`;
        resultadoDiv.classList.add('error');
        return;
    }

    if ((objetivo === "ganhar" || objetivo === "perder") && metaSemana === 0) {
        resultadoDiv.innerHTML = `<strong>Aviso:</strong> Você escolheu "${objetivo === "ganhar" ? "Ganhar" : "Perder"} peso", mas a meta semanal é 0kg. Para ${objetivo === "ganhar" ? "ganhar" : "perder"} peso, a meta semanal deve ser maior que 0.`;
        resultadoDiv.classList.add('error');
        return;
    }

    // ✅ Validação de coerência entre objetivo e pesoMeta
    if (objetivo === "perder" && pesoMeta >= pesoAtual) {
        resultadoDiv.innerHTML = `<strong>Erro:</strong> Você escolheu "Perder peso", mas o peso desejado (${pesoMeta}kg) é maior ou igual ao peso atual (${pesoAtual}kg). Isso não faz sentido para quem deseja emagrecer.`;
        resultadoDiv.classList.add('error');
        return;
    }

    if (objetivo === "ganhar" && pesoMeta <= pesoAtual) {
        resultadoDiv.innerHTML = `<strong>Erro:</strong> Você escolheu "Ganhar peso", mas o peso desejado (${pesoMeta}kg) é menor ou igual ao peso atual (${pesoAtual}kg). Isso não faz sentido para quem deseja engordar.`;
        resultadoDiv.classList.add('error');
        return;
    }

    // Verificação da meta semanal
    if (metaSemana < 0 || metaSemana > 1) {
        resultadoDiv.innerHTML = "<strong>Aviso:</strong> O valor da meta semanal deve estar entre 0 e 1 kg.";
        resultadoDiv.classList.add('error');
        return;
    }

    if (metaSemana > 0.5 && metaSemana !== 0) {
        const confirmacao = confirm(
            "Perder ou ganhar mais de 500g por semana pode ser prejudicial, podendo causar perda de massa magra (emagrecimento) ou ganho excessivo de gordura (bulking). Deseja continuar?"
        );
        if (!confirmacao) {
            resultadoDiv.innerText = "Cálculo cancelado pelo usuário.";
            return;
        }
    }

    // Cálculo de tempo necessário
    const diferencaPeso = pesoMeta - pesoAtual;
    let semanasNecessarias = 0;

    if (objetivo === "manter") {
        semanasNecessarias = 0;
    } else {
        if (metaSemana === 0 && diferencaPeso !== 0) {
            resultadoDiv.innerHTML = `<strong>Aviso:</strong> Para ${objetivo === "ganhar" ? "ganhar" : "perder"} peso, a meta semanal não pode ser 0kg.`;
            resultadoDiv.classList.add('error');
            return;
        }

        semanasNecessarias = Math.abs(diferencaPeso) / metaSemana;

        if (semanasNecessarias < 1 && diferencaPeso !== 0) {
            resultadoDiv.innerText = "Seu objetivo é muito pequeno para o ritmo escolhido, ou o ritmo é muito alto para a diferença de peso. Tente ajustar os valores.";
            resultadoDiv.classList.add('error');
            return;
        }
    }

    // Cálculo TMB
    let tmb;
    if (sexo === "masculino") {
        tmb = 10 * pesoAtual + 6.25 * altura - 5 * idade + 5;
    } else {
        tmb = 10 * pesoAtual + 6.25 * altura - 5 * idade - 161;
    }

    const gastoEnergeticoTotal = tmb * atividade;
    let caloriasNecessarias = gastoEnergeticoTotal;

    // Calorias com base no objetivo
    if (objetivo === "ganhar") {
        caloriasNecessarias += metaSemana * 1100;
    } else if (objetivo === "perder") {
        caloriasNecessarias -= metaSemana * 1100;
    }

    // Macronutrientes (40% Carbo, 30% Prot, 30% Gord)
    const proteinasG = (caloriasNecessarias * 0.30) / 4;
    const carboidratosG = (caloriasNecessarias * 0.40) / 4;
    const gordurasG = (caloriasNecessarias * 0.30) / 9;

    // Resultado
    let resultadoHTML = `
      <h3>Resultados:</h3>
      <p><strong>Taxa Metabólica Basal (TMB):</strong> ${tmb.toFixed(0)} kcal</p>
      <p><strong>Gasto Energético Total (GET):</strong> ${gastoEnergeticoTotal.toFixed(0)} kcal</p>
      <p><strong>Calorias para ${objetivo === 'manter' ? 'manter o peso' : objetivo === 'ganhar' ? 'ganhar peso' : 'perder peso'}:</strong> ${caloriasNecessarias.toFixed(0)} kcal/dia</p>
      <h4>Sugestão de Macronutrientes:</h4>
      <ul>
        <li><strong>Proteínas:</strong> ${proteinasG.toFixed(0)}g/dia</li>
        <li><strong>Carboidratos:</strong> ${carboidratosG.toFixed(0)}g/dia</li>
        <li><strong>Gorduras:</strong> ${gordurasG.toFixed(0)}g/dia</li>
      </ul>
    `;

    if (objetivo !== "manter") {
        resultadoHTML += `<p><strong>Tempo estimado para atingir o objetivo (${pesoMeta}kg):</strong> ${semanasNecessarias.toFixed(1)} semanas</p>`;
    }

    resultadoHTML += `<p><em>Lembre-se: Estes são valores aproximados. Consulte um nutricionista para um plano alimentar personalizado.</em></p>`;
    resultadoDiv.innerHTML = resultadoHTML;
}
</script>
</body>
</html>